
<!DOCTYPE html>
<html lang="ja">
<head>

  
  <meta charset="UTF-8">
  <title>
    my_autobedleveling | 楽しいことしかやりたくない。
  </title>


  
  <meta name="viewport" content="width=device-width,user-scalable=no,maximum-scale=1,initial-scale=1">


  
  <link rel="stylesheet" href="/css/sanitize.css">
  <link rel="stylesheet" href="/css/responsive.css">
  <link rel="stylesheet" href="/css/highlight_monokai.css">
  <link rel="stylesheet/less" href="/css/theme.less">
  <link rel="stylesheet" href="/css/custom.css">

  
  <script src="/js/less.js" type="text/javascript"></script>
  
  <link rel="shortcut icon" href="/assets/favicon.ico">


</head>



<body>
<div class="container">

  
  <header role="banner">
    <div class="row gutters">
      <div id="site-title" class="col span_6">
        <h1><a href="/">楽しいことしかやりたくない。</a></h1>
        <h2>loves 3DPrinter iOS UE4 Golang Meteor etc.</h2>
      </div>
      <div id="social" class="col span_6">
        <ul>
          <li><a href="https://twitter.com/abe00makoto" target="_blank">Twitter</a></li>
          <li><a href="https://facebook.com/abe00makoto" target="_blank">Facebook</a></li>
          <li><a href="https://github.com/m0a" target="_blank">GitHub</a></li>
          <li><a href="http://qiita.com/m0a" target="_blank">Qiita</a></li>
          <li><a href="http://www.thingiverse.com/m0a/designs" target="_blank">Thingiverse</a></li>

        </ul>
      </div>
    </div>
  </header>


  
  <main id="single" role="main">
    <div class="article-header">
      <h1>Genkei ATOMにシロッコファンとオートベットレベリングのためのサーボをつけた。</h1>
      <div class="meta">
        2015-05-31 20:08:15 &nbsp;
        
          #<a href="/tags/3dprinter">3DPrinter</a>&nbsp;
        
          #<a href="/tags/onshape">onShape</a>&nbsp;
        
          #<a href="/tags/genkei-atom">genkei atom</a>&nbsp;
        
      </div>
    </div>
    <article>
      

<p>今回サーボとホットエンドとつなげるためのパーツを作りましたので
パーツと取り付け方を公開します。
サーボはマイクロスイッチの上げ下げをコントロールしてオートベットレベリングを行うために使います。</p>

<h1 id="オートベットレベリングとは:b249ecd4ee4ee9a98883646cbe5ada80">オートベットレベリングとは？</h1>

<p>オートベットレベリングとは、ヒートベットの傾きを自動検出し、
そのズレを補正しながら印刷する機能のことです。
最新のファームであればMarlinでもRepeterでも付いている機能となります。
今回自分の場合はRepetier-Firmwareを使っているため、そのための手順となりますが、
Marlinでもファームの設定以外は使えるかと思います。</p>

<h1 id="必要なもの:b249ecd4ee4ee9a98883646cbe5ada80">必要なもの</h1>

<table>
<thead>
<tr>
<th>必要なパーツ</th>
<th align="right">個数</th>
<th align="right">入手経路</th>
</tr>
</thead>

<tbody>
<tr>
<td>印刷パーツ</td>
<td align="right">x2</td>
<td align="right"><a href="//">thigiverse</a></td>
</tr>

<tr>
<td>六角ネジ3mm x 40mm</td>
<td align="right">x2</td>
<td align="right">任意</td>
</tr>

<tr>
<td>六角ナット3mm</td>
<td align="right">x2</td>
<td align="right">任意</td>
</tr>

<tr>
<td>RCサーボ SG90</td>
<td align="right">x1</td>
<td align="right"><a href="http://ja.aliexpress.com/item/Free-Shipping-5PCS-LOT-SG90-9g-Mini-Micro-Servo-for-RC-for-RC-250-450-Helicopter/1956963732.html">aliexpress等</a></td>
</tr>

<tr>
<td>マイクロスイッチAV622264</td>
<td align="right">x1</td>
<td align="right"><a href="http://akizukidenshi.com/catalog/g/gP-09186/">秋月等</a></td>
</tr>
</tbody>
</table>

<p>なお、パーツの入手経路は自分の場合の話です。
<strong>実際にaliexpressを使うリスクを踏まえた上でご利用下さい。</strong></p>

<p>印刷パーツは<a href="h">thingiverse</a>に置いてあります。</p>

<h1 id="組み立て:b249ecd4ee4ee9a98883646cbe5ada80">組み立て</h1>

<ol>
<li><p>サーボに付属しているアームパーツとプラパーツをつなげてアームを作ります。
調整時に、取り付け直すことになるので、ネジ止めはしないようにします。</p></li>

<li><p>プラパーツに1.のサーボを取り付けます。
<img src="//" alt="プラパーツにサーボを取り付け" />
</p></li>

<li><p>ホットエンド前面のファンを取り外し、間にプラパーツを挟む形で再度取り付けます。
<img src="//" alt="プラパーツをホットエンド前面に接続" />
</p></li>

<li><p>RAMPS1.4とサーボを取り付けます。自分の場合はPin11に取り付けました。</p></li>

<li><p>サーボは5V供給がないと動かないのでRAMPS1.4のVCCと5Vを短絡させます。
<img src="//" alt="サーボは5V供給がないと動かないのでRAMPS1.4のVCCと5Vを短絡させます。" />
</p></li>
</ol>

<h1 id="ファームウェアの調整:b249ecd4ee4ee9a98883646cbe5ada80">ファームウェアの調整</h1>

<p>今回ファームウエアは<a href="h">Repeter</a>を使っています。
marlinとは結構違ってG-Code自体一部異なります。
STL印刷の時のG-Codeは互換性はあるんですが、少なくとも今回のオートベットレベリングは異なるようです。</p>

<h2 id="ファームのサーボ機能の有効化:b249ecd4ee4ee9a98883646cbe5ada80">ファームのサーボ機能の有効化</h2>

<h2 id="サーボの調整:b249ecd4ee4ee9a98883646cbe5ada80">サーボの調整</h2>

<p>以下のGCODEを打ち込むことでサーボを動かすことができます。</p>

<pre><code>M340 P0 S2350
</code></pre>

<p>上記の <code>2350</code> の値を変えることでアームの開閉を行います。
アームを展開させる場合の値と、閉じる場合の値をメモしておきます。</p>

<h1 id="ファームの操作手順:b249ecd4ee4ee9a98883646cbe5ada80">ファームの操作手順</h1>

<p>それを使う手順をまとめます。</p>

<p>まずはベッドにバッテンをつけます。ここを基準に、ホットエンドの先端とプローブ一の差分を検出します。</p>

<p>バッテンの位置にホットエンド先端を移動します。
そして以下のコマンドを入力し、現在の位置情報を初期化します。</p>

<pre><code>G92 X0 Y0 Z0
</code></pre>

<p>この後にサーボを下ろします。
自分の場合は</p>

<pre><code>M340 P0 S2350
</code></pre>

<p>switch check</p>

<pre><code>M119
</code></pre>

<pre><code>M114

X-11.0 Y-83.0 Z:5.3
</code></pre>

<pre><code> M303 S190 C8
 Kp: 10.88
 Ki: 0.48
 Kd: 61.87

Recv: EPR:3 218 13.3400 Extr.1 PID P-gain/dead-time
Recv: EPR:3 222 0.6700 Extr.1 PID I-gain
Recv: EPR:3 226 66.6200 Extr.1 PID D-gain

M206 T3 P808 X%(zv)s

M206 T3 P218 X10.88
M206 T3 P222 X0.67
M206 T3 P226 X66.62

</code></pre>

<p>参考：<a href="http://zennmaster.com/random-things/auto-bed-leveling-for-the-makerfarm-prusa-i3-part-3-final-setup">http://zennmaster.com/random-things/auto-bed-leveling-for-the-makerfarm-prusa-i3-part-3-final-setup</a></p>

    </article>
    
 <aside><div id="disqus_thread"></div></aside> 

<script type="text/javascript">
     
    var disqus_shortname = 'm0a';

     
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

  </main>


  
  <footer role="contentinfo">
    <div style="text-align:center;">
      <img src="/images/profile.jpg" width="64" height="64"><br>
      Written by m0a
    </div>
  </footer>


</div>

<script src="/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-50625996-3', 'auto');
	ga('send', 'pageview');
</script>

<script data-no-instant>document.write('<script src="http://'
        + (location.host || 'localhost').split(':')[0]
		+ ':1313/livereload.js?mindelay=10"></'
        + 'script>')</script></body>
</html>

